# 自動投稿システム_統合設計（全プロジェクト共通）

## システム概要
- **目的**: 全プロジェクト（EAツール販売、ホテルJOYなど）で同じUI・同じテンプレート形式で投稿管理
- **特徴**: APIキーを入力すれば完了、外部ツール不要、サイト内で完結
- **投稿形式**: 画像＋文字、予約したら完了

## 技術スタック（ホテルJOYベース）
- **フロントエンド**: React/Next.js（統一UI）
- **バックエンド**: Laravel 12.19.3（既存システムに統合）
- **データベース**: MySQL（既存DBに統合）
  - DB_HOST: 127.0.0.1
  - DB_PORT: 3306
  - DB_DATABASE: hotel_system_db
  - DB_USERNAME: hotel_user
- **SNS API**: Twitter API、note API、YouTube API、Discord Bot API
- **サーバー**: 160.251.213.147（既存サーバーに統合）
  - SSH_USER: root
  - SSH_PORT: 22
  - サーバーパス: /var/www/fashionhoteljoy.com/html/hotel_system

## システム設計

### 1) 統一UI（全プロジェクト共通）

**ダッシュボード**
- プロジェクト選択（EAツール販売、ホテルJOYなど）
- 投稿一覧（2ヶ月分のスケジュール）
- 投稿結果（クリック数、視聴数、問い合わせ数）
- APIキー設定（各SNSのAPIキーを入力）

**投稿作成画面**
- テンプレート選択（EAツール、ホテルJOYなど）
- 画像アップロード
- 文字入力
- 投稿日時設定
- チャネル選択（Twitter、note、YouTube、Discord）

**投稿管理画面**
- 投稿一覧（日付順、チャネル別）
- 投稿結果（自動集計・可視化）
- 編集・削除

---

### 2) APIキー管理（サイト内で完結）

**設定画面**
- Twitter API Key / Secret
- note API Key / Secret
- YouTube API Key / Secret
- Discord Bot Token

**保存方法**
- データベースに暗号化して保存
- 環境変数（.env）にも保存可能

**使用方法**
- APIキーを入力すれば、そのSNSへの投稿が可能
- 複数プロジェクトで同じAPIキーを共有可能

---

### 3) 投稿テンプレート（統一形式）

**テンプレート構造**
```
プロジェクト: [EAツール販売 / ホテルJOY / その他]
画像: [アップロード]
文字: [入力]
チャネル: [Twitter / note / YouTube / Discord]
投稿日時: [日時指定]
```

**テンプレート例（EAツール販売）**
- 数値開示: 画像（バックテストグラフ）+ 文字（数値サマリ）
- DD/ロットルール: 画像（ルール図解）+ 文字（説明）
- 限定β告知: 画像（CTA画像）+ 文字（告知文）

**テンプレート例（ホテルJOY）**
- シフト告知: 画像（シフト表）+ 文字（告知文）
- 給与通知: 画像（給与明細サマリ）+ 文字（通知文）
- イベント告知: 画像（イベント画像）+ 文字（告知文）

---

### 4) 自動投稿の実行フロー

1. **テンプレート作成**: 画像＋文字を入力、投稿日時を設定
2. **APIキー確認**: 各SNSのAPIキーが設定されているか確認
3. **スケジュール登録**: データベースに保存
4. **自動実行**: 指定日時にAPI経由で投稿
5. **結果集計**: 投稿結果を自動集計・可視化

---

### 5) 投稿結果の自動集計・可視化

**集計項目**
- チャネル別投稿数
- クリック数（Twitter、note）
- 視聴数（YouTube）
- 問い合わせ数（DM、メール、フォーム）
- CVR（クリック→問い合わせの変換率）

**可視化**
- ダッシュボードで1ページで確認
- 日次・週次・月次レポート
- 効果の高いチャネルを自動ハイライト

---

## 実装ステップ

### Phase 1: 基本機能（Week 1-2）
- 統一UI（React/Next.js）
- APIキー管理（Laravel）
- 投稿テンプレート作成・保存（MySQL）
- 投稿スケジュール管理

### Phase 2: 自動投稿（Week 3）
- Twitter API連携
- note API連携
- YouTube API連携
- Discord Bot API連携

### Phase 3: 結果集計（Week 4）
- 投稿結果の自動集計
- 可視化（ダッシュボード）
- レポート生成

### Phase 4: 最適化（Week 5-6）
- AI連携（投稿内容生成）
- 自動最適化（効果の高い投稿パターンの学習）
- テスト・調整

---

## データベース設計

### テーブル構成

**projects（プロジェクト）**
- id, name, description, created_at, updated_at

**api_keys（APIキー）**
- id, project_id, platform, api_key, api_secret, encrypted, created_at, updated_at

**post_templates（投稿テンプレート）**
- id, project_id, name, image_url, text, channel, scheduled_at, status, created_at, updated_at

**post_results（投稿結果）**
- id, template_id, platform, posted_at, clicks, views, inquiries, created_at, updated_at

---

## セキュリティ

- APIキーは暗号化して保存
- 環境変数（.env）で管理
- アクセス制御（認証・認可）

---

## 費用感

**初期開発**
- 開発時間: 4-6週間（AIと協力）
- サーバー費用: 月額3,000-5,000円（既存サーバーに統合可能）

**運用費用（月額）**
- サーバー: 既存サーバーに統合（追加費用なし）
- SNS API利用料: 無料〜（Twitter APIは有料プランが必要な場合あり）
- AI API: 使用量に応じて（月額5,000-10,000円想定）

**総額（月額）**: 約5,000-15,000円

---

## メリット

1. **統一UI**: 全プロジェクトで同じUI、管理が簡単
2. **サイト内完結**: APIキー入力で完了、外部ツール不要
3. **カスタマイズ性**: プロジェクトごとにテンプレートを追加可能
4. **自動化**: 投稿スケジュール・結果集計が自動
5. **拡張性**: 新しいプロジェクト・チャネルを追加可能

---

## 次のアクション

1. **Week 1**: 統一UIの設計・実装開始
2. **Week 2**: APIキー管理・投稿テンプレート作成機能
3. **Week 3**: SNS API連携（Twitter、note、YouTube、Discord）
4. **Week 4**: 投稿結果の自動集計・可視化
5. **Week 5-6**: AI連携・最適化・テスト

